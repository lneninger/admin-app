{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { AutoUnsubscribe } from 'ngx-auto-unsubscribe';\nimport { NavigationItemIds } from 'src/app/main/main.navigation';\nimport { BaseComponent } from 'src/app/shared/base.component';\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/layout/layout-main/navigation/breadcrumb/breadcrumb.service\";\nimport * as i2 from \"src/app/main/services/document/document.service\";\nimport * as i3 from \"src/app/main/services/quote/quote.service\";\nimport * as i4 from \"../../../../shared/layout/layout-main/layout-main-common/page/page.component\";\nimport * as i5 from \"../../../../shared/upload/upload.component\";\nlet DocumentsComponent = class DocumentsComponent extends BaseComponent {\n  constructor(breadcrumbService, service, quoteService) {\n    super();\n    this.breadcrumbService = breadcrumbService;\n    this.service = service;\n    this.quoteService = quoteService;\n  }\n\n  ngOnInit() {\n    this.breadcrumbService.build(NavigationItemIds.HOME, NavigationItemIds.QUOTES, NavigationItemIds.QUOTE_DOCUMENTS);\n  }\n\n  uploadSuccess($event) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const request = {\n        entityType: 'QUOTE',\n        entityId: this.quoteService.currentQuote.id,\n        originalFileName: $event.uploadResponse.originalFileName,\n        defaultStorageFilePath: $event.uploadResponse.storageFilePath,\n        contentType: $event.uploadResponse.contentType,\n        metadata: {}\n      };\n      yield this.service.save(request).pipe(first()).toPromise();\n    });\n  }\n\n};\n\nDocumentsComponent.ɵfac = function DocumentsComponent_Factory(t) {\n  return new (t || DocumentsComponent)(i0.ɵɵdirectiveInject(i1.BreadcrumbService), i0.ɵɵdirectiveInject(i2.DocumentService), i0.ɵɵdirectiveInject(i3.QuoteService));\n};\n\nDocumentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DocumentsComponent,\n  selectors: [[\"app-documents\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 2,\n  vars: 0,\n  consts: [[\"title\", \"Documents\"], [3, \"uploadSuccess\"]],\n  template: function DocumentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-page\", 0);\n      i0.ɵɵelementStart(1, \"app-upload\", 1);\n      i0.ɵɵlistener(\"uploadSuccess\", function DocumentsComponent_Template_app_upload_uploadSuccess_1_listener($event) {\n        return ctx.uploadSuccess($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i4.PageComponent, i5.UploadComponent],\n  styles: [\"\"]\n});\nDocumentsComponent = __decorate([AutoUnsubscribe()], DocumentsComponent);\nexport { DocumentsComponent };","map":null,"metadata":{},"sourceType":"module"}