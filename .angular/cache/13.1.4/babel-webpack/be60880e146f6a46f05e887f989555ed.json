{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Select } from '@ngxs/store';\nimport { AutoUnsubscribe } from 'ngx-auto-unsubscribe';\nimport { StripeCardComponent, StripeIdealBankComponent } from 'ngx-stripe';\nimport { filter, first } from 'rxjs/operators';\nimport { NavigationItemIds } from 'src/app/main/main.navigation';\nimport { AggregatorsState } from 'src/app/main/services/+state-aggregators/aggregators.state';\nimport { BaseComponent } from 'src/app/shared/base.component';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/layout/layout-main/navigation/breadcrumb/breadcrumb.service\";\nimport * as i2 from \"ngx-stripe\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../../shared/layout/layout-main/layout-main-common/page/page.component\";\nimport * as i5 from \"@angular/flex-layout/flex\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/icon\";\n\nfunction SettingsBankingComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function SettingsBankingComponent_ng_template_6_Template_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.newPaymentMethod($event);\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"account_balance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nlet SettingsBankingComponent = class SettingsBankingComponent extends BaseComponent {\n  constructor(breadcrumbService, stripeService, router, route) {\n    super();\n    this.stripeService = stripeService;\n    this.router = router;\n    this.route = route;\n    this.cardOptions = {\n      style: {\n        base: {\n          iconColor: '#666EE8',\n          color: '#31325F',\n          fontWeight: '300',\n          fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n          fontSize: '18px',\n          '::placeholder': {\n            color: '#CFD7E0'\n          }\n        }\n      }\n    };\n    this.elementsOptions = {\n      locale: 'en'\n    };\n    breadcrumbService.build(NavigationItemIds.HOME, NavigationItemIds.SETTINGS, NavigationItemIds.SETTINGS_BANKING);\n  }\n\n  ngOnInit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const stripe = (yield this.stripeService.getStripeReference().pipe(filter(_ => !!_), first()).toPromise())(environment.stripe.publicKey); // const instance = Stripe(environment.stripeKey);\n      // stripe.accounts.create({ type: 'standard' });\n    });\n  }\n\n  createToken() {\n    const name = this.stripeTest.get('name').value;\n    this.stripeService.createToken(this.card.element, {\n      name\n    }).subscribe(result => {\n      if (result.token) {\n        // Use the token\n        console.log(result.token.id);\n      } else if (result.error) {\n        // Error creating the token\n        console.log(result.error.message);\n      }\n    });\n  }\n\n  newPaymentMethod($event) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.router.navigate([{\n        outlets: {\n          action: ['new']\n        }\n      }], {\n        relativeTo: this.route\n      });\n    });\n  }\n\n};\n\nSettingsBankingComponent.ɵfac = function SettingsBankingComponent_Factory(t) {\n  return new (t || SettingsBankingComponent)(i0.ɵɵdirectiveInject(i1.BreadcrumbService), i0.ɵɵdirectiveInject(i2.StripeService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nSettingsBankingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SettingsBankingComponent,\n  selectors: [[\"app-settings-banking\"]],\n  viewQuery: function SettingsBankingComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(StripeCardComponent, 5);\n      i0.ɵɵviewQuery(StripeIdealBankComponent, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.card = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.idealBank = _t.first);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 11,\n  vars: 0,\n  consts: [[\"title\", \"Banking\", \"icon\", \"account_balance\"], [\"fxFlex\", \"auto\", \"fxLayout\", \"column\", \"fxLayoutGap\", \"20px\", \"fxLayoutAlign\", \"flex-start baseline\", 1, \"max-h-full\"], [\"fxFlexFill\", \"\", \"fxFlex\", \"\", \"fxLayout\", \"column\", \"fxLayoutAlign\", \"stretch stretch\", 1, \"custom-tab-group\", \"fill\"], [\"label\", \"Payment Methods\"], [1, \"relative\"], [\"title\", \"\", \"icon\", \"account_balance\"], [\"optionsContent\", \"\"], [\"label\", \"Transfers\"], [\"name\", \"action\"], [\"mat-mini-fab\", \"\", \"aria-label\", \"New payment method\", 3, \"click\"]],\n  template: function SettingsBankingComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-page\", 0);\n      i0.ɵɵelementStart(1, \"section\", 1);\n      i0.ɵɵelementStart(2, \"mat-tab-group\", 2);\n      i0.ɵɵelementStart(3, \"mat-tab\", 3);\n      i0.ɵɵelementStart(4, \"section\", 4);\n      i0.ɵɵelementStart(5, \"app-page\", 5);\n      i0.ɵɵtemplate(6, SettingsBankingComponent_ng_template_6_Template, 3, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"mat-tab\", 7);\n      i0.ɵɵtext(9, \" Transfers \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"router-outlet\", 8);\n    }\n  },\n  directives: [i4.PageComponent, i5.DefaultFlexDirective, i5.DefaultLayoutDirective, i5.DefaultLayoutGapDirective, i5.DefaultLayoutAlignDirective, i6.MatTabGroup, i5.FlexFillDirective, i6.MatTab, i7.MatButton, i8.MatIcon, i3.RouterOutlet],\n  styles: [\"[_nghost-%COMP%]     * form.checkout{max-width:500px;margin:2rem auto;text-align:center;border:2px solid #eee;border-radius:8px;padding:1rem 2rem;background:white;font-family:monospace;color:#525252;font-size:1.1rem}[_nghost-%COMP%]     * form.checkout button{padding:.5rem 1rem;color:#fff;background:coral;border:none;border-radius:4px;margin-top:1rem}[_nghost-%COMP%]     * form.checkout button:active{background:#a54c2b}\"]\n});\n\n__decorate([Select(AggregatorsState.aggregatorMemberTenant)], SettingsBankingComponent.prototype, \"aggregatorMemberTenant$\", void 0);\n\nSettingsBankingComponent = __decorate([AutoUnsubscribe()], SettingsBankingComponent);\nexport { SettingsBankingComponent };","map":null,"metadata":{},"sourceType":"module"}